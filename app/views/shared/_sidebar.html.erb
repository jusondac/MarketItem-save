<div class="sidebar">
  <div class="sidebar-brand bg-primary text-white">
    <span>Market-Item App</span>
  </div>
  <div class="sidebar-menu py-2 mb-4">
    <ul class="nav flex-column" id="nav_accordion">
    	<li class="nav-item">
    		<a class="nav-link" href="/">
          <i class="fas fa-tachometer-alt"></i>
          <span>Dashboard</span>
        </a>
    	</li>
    	<li class="nav-item has-submenu">
    		<span class="nav-link" href="#">
          <i class="fas fa-box"></i>
          <span>Barang</span>
        </span>
    		<ul class="submenu collapse">
    			<li><a class="nav-link" href="/items">Semua Barang </a></li>
  		    <li><a class="nav-link" href="/item_types">Tipe Barang </a></li>
  		    <li><a class="nav-link" href="/item_variants">Jenis Barang </a> </li>
    		</ul>
    	</li>
      <li class="nav-item has-submenu">
    		<span class="nav-link" href="#">
          <i class="fas fa-calendar-alt"></i>
          <span>Jadwal</span>
        </span>
    		<ul class="submenu collapse">
          <li><a class="nav-link" href="/schedule_take_keeps">Jadwal Bulan Ini </a></li>
    			<li><a class="nav-link" href="/daily_take_keeps">Jadwal Keseluruan </a></li>
    		</ul>
    	</li>
    	<li class="nav-item">
    		<a class="nav-link" href="/customers">
          <i class="fas fa-users"></i>
          <span>Customer</span>
        </a>
    	</li>

    </ul>
  </div>
  <div class="sidebar-footer bg-primary">
    <div class="row">
      <div class="col-8 d-flex flex-column ps-4">
        <span class="mt-3"><%= link_to current_user.email, edit_user_registration_path, class:'text-white' %></span>
        <span class="text-white">Role : <%= current_user.role_name.capitalize %></span>
      </div>
    </div>
  </div>
</div>
<script>

  document.querySelectorAll('.sidebar-menu .nav-link').forEach(function(element){
    element.addEventListener('click', function (e) {
      let nextEl = element.nextElementSibling;
      let parentEl  = element.parentElement;
      if(nextEl) {
        e.preventDefault();
        let mycollapse = new bootstrap.Collapse(nextEl);
          if(nextEl.classList.contains('show')){
            mycollapse.hide();
          } else {
            mycollapse.show();
            // find other submenus with class=show
            var opened_submenu = parentEl.parentElement.querySelector('.submenu.show');
            // if it exists, then close all of them
            if(opened_submenu){
              new bootstrap.Collapse(opened_submenu);
            }
          }
        }
    });
  });

</script>
